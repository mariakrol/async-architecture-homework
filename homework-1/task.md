# Домашнее задание №1

[Доска FigJam](https://www.figma.com/file/Ge5Zslipb7gqV0YJta12Mb/aTES?type=whiteboard&node-id=0%3A1&t=IlnV8lPWDGEEVPsF-1)

- [x] Разобрать каждое требование на составляющие (актор, команда, событие, query). Определить, как все бизнес цепочки 
будут выглядеть и на какие шаги они будут разбиваться.
  - [ES-модель](es-model.png)
  - **Комментарии**
    - Поддомен мониторинга выделен для того, чтобы сгруппировать в себе решение аналитических вопросов
    - Поддомен аккаунтинга выделен для того, чтобы сгруппировать финансовую аналитику и проведение платежей
    - Поддомен ведения задач содержит контексты, связанные с жизненным циклом задач
    - Поддомен обучения попугов выделен отдельно от ведения задач, т.к. функциональность описывается к требованиях как 
    ключевая (выделяющая бизнес)
    - Поддомен мотивирования исполнителей выделен отдельно, чтобы при изменении политик лояльности не затрагивалась 
    функциональность трекинга задач.

- [x] Построить модель данных для системы и модель доменов. Рисовать можно в любом удобном инструменте (включая обычную 
бумагу), главное, чтобы это было не только у вас в голове, но и где-то вовне. Благодаря этому вы сможете сфокусироваться
на отдельной части системы, не думая о других. А также показать свое решение одногрупникам/коллегам.
  - [Data модель, описывающая основные сущности системы](data-model-general.png)
  - [Core domain chart](core-domain-chart.png)
  - [Модель доменов](domain-model.png)

- [x] Определить, какие общие данные нужны для разных доменов и как связаны данные между разными доменами.
  - [Модель данных внутри поддоменов](data-in-subdomain.png)

- [x] Разобраться, какие сервисы, кроме тудушника, будут в нашей системе и какие между ними могут быть связи (как 
синхронные, так и асинхронные).
Асинхронные связи планирую использовать для аутетификации во внешней системе
Внутри aTES асинхронная связь между трекером задач и обучающим модулем, назначающим задачи
  - [Карта сервисов](service-map.png)

- [x] 1 - Определить все бизнес события, необходимые для работы системы. Отобразить кто из сервисов является продьюсером, а 
кто консьюмером бизнес событий. 
2 - Выписать все CUD события и какие данные нужны для этих событий, которые необходимы для работы системы. Отобразить 
кто из сервисов является продьюсером, а кто консьюмером CUD событий.
  - [Карта сервисов с событиями](events-producing-consuming.png)
  - **События**
    - `Task ID Created by User ID` - бизнес-событие о том, что появилась новая задача. 
      - Потребляется сервисом мониторинга для того, чтобы отобразить событие в системном логе.
      - Потребляется аккаунтингом, чтобы отобразить самую дорогую задачу за период.
      - *Данные:* `ID задачи` `ID создателя` `Имя создателя` `Роль создателя` `Цена`
    - `Task ID Finished  by User ID` - бизнес-событие о том, что задача завершена.
      - Потребляется сервисом мотивирования исполнителей, чтобы начислить вознаграждение на внутренний счет. 
      - Потребляется сервисом мониторинга для того, чтобы отобразить событие в системном логе и логе исполнителя.
      - *Данные:* `ID задачи` `ID исполнителя` `Цена исполнения`
    - `Task ID assigned to User ID` - техническое событие. На назначение исполнителя идет асинхронный запрос из трекера, 
    но его результат интересен в мониторинге и аккаунтинге. 
      - Потребляется сервисом мониторинга для того, чтобы отобразить событие в системном логе и логе исполнителя. 
      - Потребляется аккаунтингом, чтобы снять плату за назначение задачи.
      - *Данные:* `ID задачи` `ID исполнителя` `Цена назначения`
    - `Task ID unassigned from User ID` - техническое событие. Анассайн предыдущего исполнителя происходит в момент
    назначения нового исполнителя.
      - Потребляется сервисом мониторинга для того, чтобы отобразить событие в системном логе и логе бывшего исполнителя.
      - *Данные:* `ID задачи` `ID исполнителя` `Цена назначения`
    - `Fee added to the User ID` - техническое событие о том, что вознаграждение начислено. Отделено от события
    завершения задачи, чтобы была возможность внедрить различные способы мотивирвоания и модифицировать текущий
    (к примеру, добавление коофициентов за скорость) без модификации других событий.
      - Потребляется аккаунтингом, чтобы начислить плату за завершение задачи.
      - *Данные:* `ID задачи` `ID исполнителя` `Итоговое вознаграждение`