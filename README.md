# Домашние работы к курсу "Асинхронная Архитектура"

Проект содержит выполненные домашние задания для курса ["Асинхронная Архитектура"](https://education.borshev.com/architecture).

- **"Нулевая домашка"**
Нулевое задание выполнено до начала курса и показывает начальный уровень знаний.
[Раздел документации](homework-0)

- **Работа по итогам первой недели**
По итогам первой недели отредактированы модели, подготовленные в нулевой домашке.
В нулевой хотела объединить сервисы мониторинга/аналитики и аккаунтинга, потом поняла, что в целом не вижу
реальной необходимости в выделении сервисов на таком наборе требований. Но это не согласуется с целью курса, поэтому
приняла решение разделять сервисы и работать в условиях предположения, что система будет молниеносно наращивать
функциональность в условиях неограниченного бюджета на инфраструктуру.
[Раздел документации](homework-1)

- **Работа по итогам второй недели**
В рамках работы написан сервис аутентификации с использованием JWT токена. Функциональность валидирования токена, на 
данный момент, простейшая - проверяется время жизни и подпись.
Авторизация реализована при помощи кастомных аттрибутов. На данный момент созданы аттрибуты для разрешения входа без 
авторизации и обобщенный аттрибут для авторизованного входа. На следующем этапе будет внедрен аттрибут для входа в роли 
администратора и т.д.
В сервисе аутентификации добавлен метод создания нового пользователя. Данная операция провацирует создание сообщения в
очереди. 
Сорвис трекинга задач, на данный момент, не разработан. В нем написана только функциональность потребления сообщений из 
очереди.
Пользовательский интерфейс не создан в рамках задания. Проверка работоспособности делалась в Postman.

- **Работа по итогам третьей недели**
**Задание**
- [ ] Мы отдали часть системы из авторизации и таск трекера бизнесу. Спустя 15 минут бизнес попросил внести необходимые доработки после фидбэка.
Во время работы с таск трекером, мы поняли, что попуги часто в title задачи пишут конструкцию [jira-id] - Title (Пример: "UBERPOP-42 — Поменять оттенок зелёного на кнопке"). В результате чего поэтому нам необходимо разделить title на два поля: title (string) + jira_id (string). При этом, для всех новых событий, необходимо убедиться что jira-id не присутствует в title. Для этого достаточно сделать валидацию на наличие квадратных скобок (] или [)
- [ ] Поправить события на отправку задач в событиях и поменять код в сервисах
- [ ] Расписать процесс миграции на новую логику
- [ ] Выбрать формат серелизации данных и схемы. На выбор: avro, protobuf или json/xml schema.
- [ ] Выбрать реализацию schema registry и эволюции данных. Можно взять готовое решение (http://github.com/davydovanton/event_schema_registry), а можно написать свое.
- [ ] Имплементация системы аккаунтинга/биллинга + всех событий необходимых для работы системы
- [ ] Имплементация системы аналитики (можно без UI показывать все) + всех событий необходимых для работы системы
- [ ] Создать место со всеми схемами и перевести все существующие схемы в типизированный формат с нужной версией
- [ ] Так как начальники боятся потерять денег, они попросили гарантировать, что ни один $$$ не потеряется в системе.
- [ ] Выбрать стратегию обработки ошибок в событиях связанных с системой аккаунтинга, что бы быть уверенным, что все события превратятся в деньги и расписать как именно должна выглядеть эти стратегии.

**Результат**
Фактически, сделано то, что должно было войти в домашку#2, но не вошло из-за проблем с докером. Работает продьюсинг и консьюминг событий. Большая часть событий создана. Аккаунтинг в процессе, аналитику не начинала.


*ToDo:*
- [ ] Логирование
- [ ] Обработка ошибок
- [ ] Расширенная проверка JWT токена
- [ ] Замена InMemory DB
- [ ] Внедрить способ хранения именований топиков и других строковых констант